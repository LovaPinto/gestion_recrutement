{% extends 'candidate/menu.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/AllJob.css') }}">
{% endblock %}

{% block content %}
<div class="job-page">

    <h1 class="page-title">Toutes les offres d'emploi</h1>

    <!-- Barre de recherche -->
    <form method="get" action="{{ path('app_job_offer') }}" class="search-form">
        <div class="search-wrapper">
            <input
                type="text"
                name="q"
                placeholder="Rechercher un emploi..."
                value="{{ app.request.get('q') }}"
            >
            <button type="submit" class="search-btn">
                <i class="fas fa-search"></i>
            </button>
        </div>
    </form>

    <!-- Liste des offres -->
    <div class="job-list">
        {% for job in jobOffers %}
            <div class="job-card">

                <div class="job-color-bar"></div>

                <div class="job-content">
                    <!-- TITRE + CONTRAT -->
                    <div class="job-header">
                        <h3 class="job-title">
                            <a href="{{ path('job_offer_show', {id: job.id}) }}">
                                {{ job.title }}
                            </a>
                        </h3>
                        <span class="job-contract">{{ job.offerType }}</span>
                    </div>

                    <!-- DESCRIPTION -->
                    <p class="job-description">
                        {{ job.description|slice(0, 180) }}...
                    </p>

                    <!-- INFOS SUPPLÉMENTAIRES -->
                    <div class="job-info">
                        <span><i class="fas fa-map-marker-alt"></i> Madagascar</span>
                        <span><i class="far fa-clock"></i> Publié : {{ job.dateCreation|date('d/m/Y') }}</span>
                        <span><i class="fas fa-calendar-alt"></i> Deadline : {{ job.deadline|date('d/m/Y') }}</span>
                    </div>

                    <!-- BOUTON -->
                    <a href="{{ path('job_offer_show', {id: job.id}) }}" class="btn-details btn-small">
                        Voir l’offre
                    </a>
                </div>

            </div>
        {% else %}
            <p class="no-result">Aucune offre disponible.</p>
        {% endfor %}
    </div>

    <div class="pagination-wrapper">
        {{ knp_pagination_render(jobOffers) }}
    </div>

</div>
{% endblock %}
